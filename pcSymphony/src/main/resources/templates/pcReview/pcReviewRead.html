<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="../../static/css/style.css" rel="stylesheet" th:href="@{/css/style.css}">
    <link href="../../static/css/header.css" rel="stylesheet" th:href="@{/css/header.css}">
    <link href="../../static/css/footer.css" rel="stylesheet" th:href="@{/css/footer.css}">

    <link href="../../static/css/pcReviewRead.css" rel="stylesheet" th:href="@{/css/pcReviewRead.css}">
    <script src="../../static/js/header.js" th:src="@{/js/header.js}"></script>
    <!--    <script src="../../static/js/pcReviewWrite.js" th:src="@{/js/pcReviewWrite.js}"></script>-->
    <title>PC리뷰 read</title>
    <style>
        .container-like {
            width: 100%;
            max-width: 1128px;
            margin: 0 auto;
            padding-left: 16px;
            padding-right: 16px;
            font-family: "Playfair Display", serif;
            font-weight: 900;
            word-wrap: break-word;
            overflow-wrap: break-word;
            border-bottom: #0c1622 solid 3px;
            box-sizing: border-box; /* padding을 border 길이에서 제외 */

        }

        .pcReviewTitleName {
            all: unset; /* 모든 스타일 초기화 */
            cursor: pointer; /* 링크처럼 보이게 */
            color: #0c1622;

        }
    </style>
</head>
<body>
<div th:replace="~{fragments/header :: headerFragment}"></div>
<div class="body-wrap">
    <main class="site-content">
        <a class="pcReviewTitleName" href="/pcReview/pcReviewList"><h1 class="container-like">PC 리뷰</h1></a>
        <div class="container">
            <!--전체 리뷰의 제목이 들어감-->
            <div th:text="${pcReview.pcreviewTitle}">제목</div>
            <!-- 게시물 정보 -->
            <div id="">
                조회수: <span th:text="${}"></span>
                작성자: <span th:text="${pcReview.userId}"></span>
                작성일: <span th:text="${pcReview.pcreviewDate}"></span>
            </div>
            <!-- 업로드한 이미지를 표시 -->
            <div id="uploadedImages" style="margin-top: 10px; display: flex; align-items: center;">
                <img alt="Uploaded Image" th:src="@{/images/nav-case.png}">
            </div>
            <!-- 게시물 내용 -->
            <div id="community-content" th:text="${pcReview.pcreviewContent}">내용</div>
        </div>
        <div class="container">
            <div>PartsReview</div>
            <fieldset>
                <label class="partsTitle">
                    <!-- CPU 제목 텍스트 -->
                    <span>CPU:</span>
                    <!-- 썸네일 이미지 -->
                    <img th:src="@{/images/nav-cpu.png}" alt="CPU Image" class="partsImage">
                    <!-- CPU 이름 -->
                    <span th:text="${cart.cpu.name}">[CPU 이름]</span>
                </label>
                <br>

            </fieldset>
            <!-- CPU 리뷰 -->
        </div>
    </main>
</div>
</div>
</body>
<script>
    // CPU event handling
    const editCpuButton = document.getElementById('editCpuButton');
    const cancelCpuButton = document.getElementById('cancelCpuButton');
    const saveCpuButton = document.getElementById('saveCpuButton');
    const cpuRow = document.getElementById('cpuRow');
    const editCpuRow = document.getElementById('editCpuRow');
    const cpuTitle = document.getElementById('cpuTitle');
    const cpuContent = document.getElementById('cpuContent');
    const cpuRating = document.getElementById('cpuRating');
    const editCpuTitle = document.getElementById('editCpuTitle');
    const editCpuContent = document.getElementById('editCpuContent');
    const editCpuRating = document.getElementById('editCpuRating');

    editCpuButton.addEventListener('click', () => {
        cpuRow.style.display = 'none';
        editCpuRow.style.display = 'table-row';
        editCpuTitle.value = cpuTitle.textContent;
        editCpuContent.value = cpuContent.textContent;
        editCpuRating.value = cpuRating.textContent.trim();
    });

    cancelCpuButton.addEventListener('click', () => {
        editCpuRow.style.display = 'none';
        cpuRow.style.display = 'table-row';
    });

    saveCpuButton.addEventListener('click', async () => {
        const updatedTitle = editCpuTitle.value;
        const updatedContent = editCpuContent.value;
        const updatedRating = editCpuRating.value;

        // Update the UI
        cpuTitle.textContent = updatedTitle;
        cpuContent.textContent = updatedContent;
        cpuRating.textContent = updatedRating;
        editCpuRow.style.display = 'none';
        cpuRow.style.display = 'table-row';
        console.log("testseteststseetestestest");
        console.log(cpuRow.dataset.id);
        // Send the updated data to the server
        try {
            const response = await fetch('/pcreview/update', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    partsReviewId: cpuRow.dataset.id, // HTML에 `data-id` 속성으로 ID를 포함
                    partsReviewTitle: updatedTitle,
                    partsReviewContent: updatedContent,
                    partsReviewRating: updatedRating,
                }),
            });

            if (!response.ok) {
                console.error('Failed to update the database');
                alert('데이터베이스 업데이트에 실패했습니다.');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('서버와의 통신 중 문제가 발생했습니다.');
        }
    });

    // cpucooler event handling
    const editCpucoolerButton = document.getElementById('editCpucoolerButton');
    const cancelCpucoolerButton = document.getElementById('cancelCpucoolerButton');
    const saveCpucoolerButton = document.getElementById('saveCpucoolerButton');
    const cpucoolerRow = document.getElementById('cpucoolerRow');
    const editCpucoolerRow = document.getElementById('editCpucoolerRow');
    const cpucoolerTitle = document.getElementById('cpucoolerTitle');
    const cpucoolerContent = document.getElementById('cpucoolerContent');
    const cpucoolerRating = document.getElementById('cpucoolerRating');
    const editCpucoolerTitle = document.getElementById('editCpucoolerTitle');
    const editCpucoolerContent = document.getElementById('editCpucoolerContent');
    const editCpucoolerRating = document.getElementById('editCpucoolerRating');

    editCpucoolerButton.addEventListener('click', () => {
        cpucoolerRow.style.display = 'none';
        editCpucoolerRow.style.display = 'table-row';
        editCpucoolerTitle.value = cpucoolerTitle.textContent;
        editCpucoolerContent.value = cpucoolerContent.textContent;
        editCpucoolerRating.value = cpucoolerRating.textContent.trim();
    });

    cancelCpucoolerButton.addEventListener('click', () => {
        editCpucoolerRow.style.display = 'none';
        cpucoolerRow.style.display = 'table-row';
    });

    saveCpucoolerButton.addEventListener('click', () => {
        cpucoolerTitle.textContent = editCpucoolerTitle.value;
        cpucoolerContent.textContent = editCpucoolerContent.value;
        cpucoolerRating.textContent = editCpucoolerRating.value;
        editCpucoolerRow.style.display = 'none';
        cpucoolerRow.style.display = 'table-row';
    });

    // motherboard event handling
    const editMotherboardButton = document.getElementById('editMotherboardButton');
    const cancelMotherboardButton = document.getElementById('cancelMotherboardButton');
    const saveMotherboardButton = document.getElementById('saveMotherboardButton');
    const motherboardRow = document.getElementById('motherboardRow');
    const editMotherboardRow = document.getElementById('editMotherboardRow');
    const motherboardTitle = document.getElementById('motherboardTitle');
    const motherboardContent = document.getElementById('motherboardContent');
    const motherboardRating = document.getElementById('motherboardRating');
    const editMotherboardTitle = document.getElementById('editMotherboardTitle');
    const editMotherboardContent = document.getElementById('editMotherboardContent');
    const editMotherboardRating = document.getElementById('editMotherboardRating');

    editMotherboardButton.addEventListener('click', () => {
        motherboardRow.style.display = 'none';
        editMotherboardRow.style.display = 'table-row';
        editMotherboardTitle.value = motherboardTitle.textContent;
        editMotherboardContent.value = motherboardContent.textContent;
        editMotherboardRating.value = motherboardRating.textContent.trim();
    });

    cancelMotherboardButton.addEventListener('click', () => {
        editMotherboardRow.style.display = 'none';
        motherboardRow.style.display = 'table-row';
    });

    saveMotherboardButton.addEventListener('click', () => {
        motherboardTitle.textContent = editMotherboardTitle.value;
        motherboardContent.textContent = editMotherboardContent.value;
        motherboardRating.textContent = editMotherboardRating.value;
        editMotherboardRow.style.display = 'none';
        motherboardRow.style.display = 'table-row';
    });

    // Memory event handling
    const editMemoryButton = document.getElementById('editMemoryButton');
    const cancelMemoryButton = document.getElementById('cancelMemoryButton');
    const saveMemoryButton = document.getElementById('saveMemoryButton');
    const memoryRow = document.getElementById('memoryRow');
    const editMemoryRow = document.getElementById('editMemoryRow');
    const memoryTitle = document.getElementById('memoryTitle');
    const memoryContent = document.getElementById('memoryContent');
    const memoryRating = document.getElementById('memoryRating');
    const editMemoryTitle = document.getElementById('editMemoryTitle');
    const editMemoryContent = document.getElementById('editMemoryContent');
    const editMemoryRating = document.getElementById('editMemoryRating');

    editMemoryButton.addEventListener('click', () => {
        memoryRow.style.display = 'none';
        editMemoryRow.style.display = 'table-row';
        editMemoryTitle.value = memoryTitle.textContent;
        editMemoryContent.value = memoryContent.textContent;
        editMemoryRating.value = memoryRating.textContent.trim();
    });

    cancelMemoryButton.addEventListener('click', () => {
        editMemoryRow.style.display = 'none';
        memoryRow.style.display = 'table-row';
    });

    saveMemoryButton.addEventListener('click', () => {
        memoryTitle.textContent = editMemoryTitle.value;
        memoryContent.textContent = editMemoryContent.value;
        memoryRating.textContent = editMemoryRating.value;
        editMemoryRow.style.display = 'none';
        memoryRow.style.display = 'table-row';
    });

    // Storage event handling
    const editStorageButton = document.getElementById('editStorageButton');
    const cancelStorageButton = document.getElementById('cancelStorageButton');
    const saveStorageButton = document.getElementById('saveStorageButton');
    const storageRow = document.getElementById('storageRow');
    const editStorageRow = document.getElementById('editStorageRow');
    const storageTitle = document.getElementById('storageTitle');
    const storageContent = document.getElementById('storageContent');
    const storageRating = document.getElementById('storageRating');
    const editStorageTitle = document.getElementById('editStorageTitle');
    const editStorageContent = document.getElementById('editStorageContent');
    const editStorageRating = document.getElementById('editStorageRating');

    editStorageButton.addEventListener('click', () => {
        storageRow.style.display = 'none';
        editStorageRow.style.display = 'table-row';
        editStorageTitle.value = storageTitle.textContent;
        editStorageContent.value = storageContent.textContent;
        editStorageRating.value = storageRating.textContent.trim();
    });

    cancelStorageButton.addEventListener('click', () => {
        editStorageRow.style.display = 'none';
        storageRow.style.display = 'table-row';
    });

    saveStorageButton.addEventListener('click', () => {
        storageTitle.textContent = editStorageTitle.value;
        storageContent.textContent = editStorageContent.value;
        storageRating.textContent = editStorageRating.value;
        editStorageRow.style.display = 'none';
        storageRow.style.display = 'table-row';
    });

    // Video Card event handling
    const editVideocardButton = document.getElementById('editVideocardButton');
    const cancelVideocardButton = document.getElementById('cancelVideocardButton');
    const saveVideocardButton = document.getElementById('saveVideocardButton');
    const videocardRow = document.getElementById('videocardRow');
    const editVideocardRow = document.getElementById('editVideocardRow');
    const videocardTitle = document.getElementById('videocardTitle');
    const videocardContent = document.getElementById('videocardContent');
    const videocardRating = document.getElementById('videocardRating');
    const editVideocardTitle = document.getElementById('editVideocardTitle');
    const editVideocardContent = document.getElementById('editVideocardContent');
    const editVideocardRating = document.getElementById('editVideocardRating');

    editVideocardButton.addEventListener('click', () => {
        videocardRow.style.display = 'none';
        editVideocardRow.style.display = 'table-row';
        editVideocardTitle.value = videocardTitle.textContent;
        editVideocardContent.value = videocardContent.textContent;
        editVideocardRating.value = videocardRating.textContent.trim();
    });

    cancelVideocardButton.addEventListener('click', () => {
        editVideocardRow.style.display = 'none';
        videocardRow.style.display = 'table-row';
    });

    saveVideocardButton.addEventListener('click', () => {
        videocardTitle.textContent = editVideocardTitle.value;
        videocardContent.textContent = editVideocardContent.value;
        videocardRating.textContent = editVideocardRating.value;
        editVideocardRow.style.display = 'none';
        videocardRow.style.display = 'table-row';
    });

    // Power Supply event handling
    const editPowersupplyButton = document.getElementById('editPowersupplyButton');
    const cancelPowersupplyButton = document.getElementById('cancelPowersupplyButton');
    const savePowersupplyButton = document.getElementById('savePowersupplyButton');
    const powersupplyRow = document.getElementById('powersupplyRow');
    const editPowersupplyRow = document.getElementById('editPowersupplyRow');
    const powersupplyTitle = document.getElementById('powersupplyTitle');
    const powersupplyContent = document.getElementById('powersupplyContent');
    const powersupplyRating = document.getElementById('powersupplyRating');
    const editPowersupplyTitle = document.getElementById('editPowersupplyTitle');
    const editPowersupplyContent = document.getElementById('editPowersupplyContent');
    const editPowersupplyRating = document.getElementById('editPowersupplyRating');

    editPowersupplyButton.addEventListener('click', () => {
        powersupplyRow.style.display = 'none';
        editPowersupplyRow.style.display = 'table-row';
        editPowersupplyTitle.value = powersupplyTitle.textContent;
        editPowersupplyContent.value = powersupplyContent.textContent;
        editPowersupplyRating.value = powersupplyRating.textContent.trim();
    });

    cancelPowersupplyButton.addEventListener('click', () => {
        editPowersupplyRow.style.display = 'none';
        powersupplyRow.style.display = 'table-row';
    });

    savePowersupplyButton.addEventListener('click', () => {
        powersupplyTitle.textContent = editPowersupplyTitle.value;
        powersupplyContent.textContent = editPowersupplyContent.value;
        powersupplyRating.textContent = editPowersupplyRating.value;
        editPowersupplyRow.style.display = 'none';
        powersupplyRow.style.display = 'table-row';
    });

    // Cover event handling
    const editCoverButton = document.getElementById('editCoverButton');
    const cancelCoverButton = document.getElementById('cancelCoverButton');
    const saveCoverButton = document.getElementById('saveCoverButton');
    const coverRow = document.getElementById('coverRow');
    const editCoverRow = document.getElementById('editCoverRow');
    const coverTitle = document.getElementById('coverTitle');
    const coverContent = document.getElementById('coverContent');
    const coverRating = document.getElementById('coverRating');
    const editCoverTitle = document.getElementById('editCoverTitle');
    const editCoverContent = document.getElementById('editCoverContent');
    const editCoverRating = document.getElementById('editCoverRating');

    editCoverButton.addEventListener('click', () => {
        coverRow.style.display = 'none';
        editCoverRow.style.display = 'table-row';
        editCoverTitle.value = coverTitle.textContent;
        editCoverContent.value = coverContent.textContent;
        editCoverRating.value = coverRating.textContent.trim();
    });

    cancelCoverButton.addEventListener('click', () => {
        editCoverRow.style.display = 'none';
        coverRow.style.display = 'table-row';
    });

    saveCoverButton.addEventListener('click', () => {
        coverTitle.textContent = editCoverTitle.value;
        coverContent.textContent = editCoverContent.value;
        coverRating.textContent = editCoverRating.value;
        editCoverRow.style.display = 'none';
        coverRow.style.display = 'table-row';
    });

</script>
</html>