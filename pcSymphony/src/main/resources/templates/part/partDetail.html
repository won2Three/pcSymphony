<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="${part.name} + ' 상세 정보'">Part Detail</title>
  <style>
    table {
        border-collapse: collapse;
        width: 50%;
        margin: 20px auto;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
    th {
        background-color: #f2f2f2;
    }
    h1 {
        text-align: center;
    }
  </style>
</head>
<body>
<h1 th:text="${tableName} + ' : ' + ${part.name} + ' 상세 정보'">Part Detail</h1>

<table>
  <tbody>
  <!-- 공통 속성들 -->
  <tr>
    <td>ID</td>
    <td th:text="${part.id}">ID</td>

    <td>이름</td>
    <td th:text="${part.name}">Name</td>

    <td>제조사</td>
    <td th:text="${part.manufacturer}">Manufacturer</td>

    <td>파트</td>
    <td th:text="${part.part}">Part</td>

    <td>가격</td>
    <td th:text="${part.price}">Price</td>
  </tr>

  <!-- CoverDTO 속성들 -->
  <tr th:if="${tableName == 'cover'}">
    <td>파워 서플라이 여부</td>
    <td th:text="${part.coverPowerSupply} ? 'Yes' : 'No'">Cover Power Supply</td>

    <td>메인보드 폼팩터</td>
    <td th:text="${part.coverMotherboardFormFactor}">Cover Motherboard Form Factor</td>

    <td>최대 비디오 카드 길이</td>
    <td th:text="${part.coverMaxVideoCardLength}">Cover Max Video Card Length</td>

    <td>타입</td>
    <td th:text="${part.coverType}">Cover Type</td>

    <td>색상</td>
    <td th:text="${part.coverColor}">Cover Color</td>
  </tr>

  <!-- CpuCoolerDTO 속성들 -->
  <tr th:if="${tableName == 'cpucooler'}">
    <td>CPU 소켓</td>
    <td th:text="${part.cpuCoolerCpuSocket}">CPU Cooler CPU Socket</td>

    <td>수냉 여부</td>
    <td th:text="${part.cpuCoolerWaterCooled} ? 'Yes' : 'No'">Water Cooled</td>

    <td>색상</td>
    <td th:text="${part.cpuCoolerColor}">CPU Cooler Color</td>

    <td>소음 수준</td>
    <td th:text="${part.cpuCoolerNoiseLevel}">Noise Level</td>

    <td>팬 RPM</td>
    <td th:text="${part.cpuCoolerFanRpm}">Fan RPM</td>
  </tr>

  <!-- CpuDTO 속성들 -->
  <tr th:if="${tableName == 'cpu'}">
    <td>시리즈</td>
    <td th:text="${part.cpuSeries}">Series</td>

    <td>소켓</td>
    <td th:text="${part.cpuSocket}">Socket</td>

    <td>쿨러 포함 여부</td>
    <td th:text="${part.cpuIncludesCooler} ? 'Yes' : 'No'">Includes Cooler</td>

    <td>TDP</td>
    <td th:text="${part.cpuTdp}">TDP</td>

    <td>마이크로아키텍처</td>
    <td th:text="${part.cpuMicroarchitecture}">Microarchitecture</td>

    <td>코어 수</td>
    <td th:text="${part.cpuCoreCount}">Core Count</td>

    <td>스레드 수</td>
    <td th:text="${part.cpuThreadCount}">Thread Count</td>

    <td>성능 코어 클럭</td>
    <td th:text="${part.cpuPerformanceCoreClock}">Performance Core Clock</td>

    <td>성능 부스트 클럭</td>
    <td th:text="${part.cpuPerformanceCoreBoostClock}">Performance Core Boost Clock</td>
  </tr>

  <!-- MemoryDTO 속성들 -->
  <tr th:if="${tableName == 'memory'}">
    <td>메모리 폼팩터</td>
    <td th:text="${part.memoryFormFactor}">Memory Form Factor</td>

    <td>색상</td>
    <td th:text="${part.memoryColor}">Memory Color</td>

    <td>모듈</td>
    <td th:text="${part.memoryModule}">Memory Module</td>

    <td>속도</td>
    <td th:text="${part.memorySpeed}">Memory Speed</td>
  </tr>

  <!-- MotherboardDTO 속성들 -->
  <tr th:if="${tableName == 'motherboard'}">
    <td>소켓 CPU</td>
    <td th:text="${part.motherboardSocketCpu}">Motherboard Socket CPU</td>

    <td>폼팩터</td>
    <td th:text="${part.motherboardFormFactor}">Motherboard Form Factor</td>

    <td>메모리 유형</td>
    <td th:text="${part.motherboardMemoryType}">Motherboard Memory Type</td>

    <td>칩셋</td>
    <td th:text="${part.motherboardChipset}">Motherboard Chipset</td>

    <td>메모리 슬롯 수</td>
    <td th:text="${part.motherboardMemorySlotCount}">Motherboard Memory Slot Count</td>

    <td>슬롯 수 (M.2)</td>
    <td th:text="${part.motherboardMdot2SlotCount}">Motherboard M.2 Slot Count</td>
  </tr>

  <!-- PowerSupplyDTO 속성들 -->
  <tr th:if="${tableName == 'powersupply'}">
    <td>전원 종류</td>
    <td th:text="${part.powerSupplyType}">Power Supply Type</td>

    <td>전력(W)</td>
    <td th:text="${part.powerSupplyWattage}">Power Supply Wattage</td>

    <td>길이</td>
    <td th:text="${part.powerSupplyLength}">Power Supply Length</td>

    <td>색상</td>
    <td th:text="${part.powerSupplyColor}">Power Supply Color</td>
  </tr>

  <!-- StorageDTO 속성들 -->
  <tr th:if="${tableName == 'storage'}">
    <td>저장소 종류</td>
    <td th:text="${part.storageType}">Storage Type</td>

    <td>저장소 폼팩터</td>
    <td th:text="${part.storageFormFactor}">Storage Form Factor</td>

    <td>저장소 용량</td>
    <td th:text="${part.storageCapacity}">Storage Capacity</td>
  </tr>

  <!-- VideoCardDTO 속성들 -->
  <tr th:if="${tableName == 'videocard'}">
    <td>비디오 카드 길이</td>
    <td th:text="${part.videoCardLength}">Video Card Length</td>

    <td>비디오 카드 TDP</td>
    <td th:text="${part.videoCardTdp}">Video Card TDP</td>

    <td>메모리</td>
    <td th:text="${part.videoCardMemory}">Video Card Memory</td>

    <td>칩셋</td>
    <td th:text="${part.videoCardChipset}">Video Card Chipset</td>

    <td>색상</td>
    <td th:text="${part.videoCardColor}">Video Card Color</td>

    <td>코어 클럭</td>
    <td th:text="${part.videoCardCoreClock}">Core Clock</td>

    <td>부스트 클럭</td>
    <td th:text="${part.videoCardBoostClock}">Boost Clock</td>
  </tr>

  <tr>
    <td colspan="2">
      <button th:data-table-name="${tableName}" th:data-id="${part.id}" onclick="addToCart(this)">장바구니에 담기</button>
    </td>
  </tr>
<!-- 담기버튼을 누르면 tableName알맞는 장바구니의 id값에 담긴다. -->
  </tbody>
</table>
<script>
  function addToCart(button) {
    const tableName = button.getAttribute('data-table-name');
    const id = button.getAttribute('data-id');

    fetch(`/cart/add`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ tableName: tableName, id: id }),
    })
    .then(response => {
      if (response.ok) {
        alert('장바구니에 추가되었습니다!');
      } else {
        alert('장바구니 추가에 실패했습니다.');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      alert('장바구니 추가 중 오류가 발생했습니다.');
    });
  }
</script>
</body>
</html>
